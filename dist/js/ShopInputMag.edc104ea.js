(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ShopInputMag"],{"30af":function(t,e,a){},cbd7:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("v-container",{attrs:{fluid:""}},[e("v-toolbar",[e("v-toolbar-title",[t._v("사업신청관리")]),e("v-spacer"),e("v-text-field",{attrs:{label:"업체명 : ","hide-details":"","single-lin":""},model:{value:t.chkf_serarch,callback:function(e){t.chkf_serarch=e},expression:"chkf_serarch"}}),e("v-radio-group",{staticClass:"small-radio no-space",attrs:{inline:"",label:"공방서류:",row:"","hide-details":""},model:{value:t.chkf_dochk,callback:function(e){t.chkf_dochk=e},expression:"chkf_dochk"}},[e("v-radio",{attrs:{label:"전체",value:"%"}}),e("v-radio",{attrs:{label:"완료",value:"Y"}}),e("v-radio",{attrs:{label:"미완료",value:"N"}})],1),e("v-radio-group",{staticClass:"small-radio no-space",attrs:{inline:"",label:"e나라도움:",row:"","hide-details":""},model:{value:t.chkf_enara,callback:function(e){t.chkf_enara=e},expression:"chkf_enara"}},[e("v-radio",{attrs:{label:"전체",value:"%"}}),e("v-radio",{attrs:{label:"완료",value:"Y"}}),e("v-radio",{attrs:{label:"미완료",value:"N"}})],1),e("v-btn",{attrs:{color:"primary"},on:{click:t.fetchData}},[t._v("조회")])],1),e("v-row",[e("v-col",{attrs:{sm:"6"}},[e("v-data-table",{staticClass:"elevation-5 mytable",attrs:{height:"500","max-height":"800",headers:t.headers,items:t.itemInputs,"items-per-page":20,"footer-props":{"items-per-page-options":[10,20,30,40,50,100,-1]}},scopedSlots:t._u([{key:"item",fn:function({item:a}){return[e("tr",{attrs:{align:"center"}},[e("td",{attrs:{align:"left"},on:{click:function(e){return t.clickItem(a,t.tabs)}}},[t._v(" "+t._s(a.n_company)+" ")]),e("td",{class:{greencol:"1"==a.f_persioninfo,redcol:"1"!=a.f_persioninfo},on:{click:function(e){return t.clickItem(a,t.tabs)}}},[t._v(" "+t._s(t.datachk(a.f_persioninfo))+" ")]),e("td",{class:{greencol:"Y"==a.chk1,redcol:"Y"!=a.chk1},on:{click:function(e){return t.clickItem(a,0)}}},[t._v(" "+t._s(t.datachk(a.chk1))+" ")]),e("td",{class:{greencol:"Y"==a.chk2,redcol:"Y"!=a.chk2},on:{click:function(e){return t.clickItem(a,1)}}},[t._v(" "+t._s(t.datachk(a.chk2))+" ")]),e("td",{class:{greencol:"Y"==a.chk3,redcol:"Y"!=a.chk3},on:{click:function(e){return t.clickItem(a,2)}}},[t._v(" "+t._s(t.datachk(a.chk3))+" ")]),e("td",{class:{greencol:"Y"==a.f_dochk,redcol:"Y"!=a.f_dochk},on:{dblclick:function(e){return t.f_dochk(a)}}},[e("u",[t._v(t._s(t.datachk2(a.f_dochk)))])]),e("td",{class:{greencol:"Y"==a.f_enarachk,redcol:"Y"!=a.f_enarachk},on:{dblclick:function(e){return t.f_enarachk(a)}}},[e("u",[t._v(t._s(t.datachk2(a.f_enarachk)))])])])]}}])})],1),e("v-col",{attrs:{sm:"6"}},[e("v-tabs",{attrs:{"background-color":"primary",dark:""},model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[e("v-tab",{attrs:{value:"tbapage_1"}},[t._v("회사정보")]),e("v-tab",{attrs:{value:"tbapage_2"}},[t._v("신청서류")]),e("v-tab",{attrs:{value:"tbapage_3"}},[t._v("추가서류")])],1),e("v-card-text",[e("v-tabs-items",{staticClass:"elevation-2",model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[e("v-tab-item",[e("table",{staticClass:"type03"},[e("tr",[e("th",[t._v("업체명")]),e("td",[t._v(t._s(t.itemInput.n_company))])]),e("tr",[e("th",[t._v("사업자번호")]),e("td",[t._v(t._s(t.itemInput.i_regno))])]),e("tr",[e("th",[t._v("대표자")]),e("td",[t._v(t._s(t.itemInput.n_person))])]),e("tr",[e("th",[t._v("대표자주민번호")]),e("td",[t._v(t._s(t.itemInput.i_presno))])]),e("tr",[e("th",[t._v("연락처(유선)")]),e("td",[t._v(t._s(t.itemInput.t_tel1))])]),e("tr",[e("th",[t._v("휴대폰")]),e("td",[t._v(t._s(t.itemInput.t_tel2))])]),e("tr",[e("th",[t._v("이메일")]),e("td",[t._v(t._s(t.itemInput.i_email))])]),e("tr",[e("th",[t._v("사업자구분")]),e("td",[t._v(t._s(t.itemInput.f_saugup))])]),e("tr",[e("th",[t._v("이전중진공사업")]),e("td",[t._v(t._s(t.itemInput.f_run))])]),e("tr",[e("th",[t._v("3년 표준 재무제표")]),e("td",[t._v(t._s(t.itemInput.f_dart))])]),e("tr",[e("th",[t._v("이나라도움 아이디")]),e("td",[t._v(t._s(t.itemInput.t_enarainfo))])]),e("tr",[e("th",[t._v("이나라도움 패스워드")]),e("td",[t._v(t._s(t.itemInput.t_enarainfopw))])]),e("tr",[e("th",[t._v("우편번호")]),e("td",[t._v(t._s(t.itemInput.i_post))])]),e("tr",[e("th",[t._v("주소")]),e("td",[t._v(t._s(t.itemInput.t_addr1))])]),e("tr",[e("th",[t._v("세부 주소")]),e("td",[t._v(t._s(t.itemInput.t_addr2))])])])]),e("v-tab-item",[e("shopinputmag-03-form",{attrs:{fileLists:t.fileAdds,companyName:t.itemInput.n_company},on:{process:t.saveDocProcess,mailSend:t.mailSend}})],1),e("v-tab-item",[e("shopinputmag-03-form",{attrs:{fileLists:t.fileAddsB,companyName:t.itemInput.n_company},on:{process:t.saveDocProcess,mailSend:t.mailSend}})],1)],1)],1)],1)],1),e("tiptab-mail",{ref:"dialog",attrs:{label:"메일발송",body_content:this.form.body,mail_title:this.form.title,itemInput:this.itemInput,"max-width":"900","max-height":"1300",persistent:""},on:{onSend:t.sendMail}}),e("ez-dialog-2",{ref:"ez_wait",attrs:{label:"처리중","max-width":"200",persistent:"",color:"primary"}})],1)},n=[],s=a("64f2"),o=a("2f62"),l=function(){var t=this,e=t._self._c;return e("v-form",{ref:"form"},[e("v-toolbar",{attrs:{"background-color":"primary",dark:""}},[t.fileLists.length?e("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.process(t.form)}}},[t._v("서류처리")]):t._e(),t.fileLists.length?e("v-btn",{attrs:{color:"primary"},on:{click:t.mailSend}},[t._v("메일발송")]):t._e(),e("v-spacer"),t.fileLists.length?e("v-checkbox",{staticClass:"mx-4",attrs:{label:"서류명","hide-details":"",color:"primary"},model:{value:t.f_downchk2,callback:function(e){t.f_downchk2=e},expression:"f_downchk2"}}):t._e(),t.fileLists.length?e("v-btn",{attrs:{color:"primary"},on:{click:t.alldownLoad}},[t._v("일과 내려받기")]):t._e()],1),e("v-data-table",{staticClass:"mytable",attrs:{headers:t.fileHeaders,items:t.form},scopedSlots:t._u([{key:"item",fn:function({item:a}){return[e("tr",[e("td",{attrs:{align:"center"}},[t._v(" "+t._s(a.i_ser)+" ")]),e("td",{class:{redcol:1==a.f_yn,greencol:0==a.f_yn},attrs:{align:"center"}},[t._v(t._s(t.f_ynchk(a.f_yn))+" ")]),e("td",{class:{redcol:"N"==a.f_noact,greencol:"Y"==a.f_noact,bluecol:"I"==a.f_noact},attrs:{align:"center"},on:{dblclick:function(e){return t.docProcess(a)}}},[e("u",[t._v(t._s(t.f_noact(a.f_noact)))])]),e("td",[t._v(" "+t._s(a.n_filename)+" ")]),e("td",[t._v(" "+t._s(a.n_file)+" ")]),e("td",{attrs:{align:"center"}},[a.t_att?e("v-btn",{attrs:{fab:"","x-small":""},on:{click:function(e){return t.downLoad(a)}}},[e("v-icon",{attrs:{dark:""}},[t._v("mdi-file-download")])],1):t._e()],1)])]}}])})],1)},r=[],c=a("9e7e"),_={name:"Shopinputmag03Form",props:{fileLists:{type:Array,default:null},companyName:null},data(){return{fileHeaders:[{text:"순번",value:"i_ser",sortable:!1,align:"center",width:"55px"},{text:"필수여부",value:"f_yn",sortable:!1,align:"center",width:"80px"},{text:"서류",value:"f_noact",sortable:!1,align:"center",width:"55px"},{text:"첨부서류",value:"n_filename",sortable:!1},{text:"첨부파일명",value:"n_file",sortable:!1},{text:"DOWN",value:"t_att",sortable:!1,align:"center",width:"75px"}],form:{i_shop:"",i_ser:"",i_no:"",f_gubun:"",f_yn:"",f_noact:"",n_filename:"",n_file:"",t_att:"",f_edit:!1},f_downchk1:1,f_downchk2:0}},created(){this.init()},watch:{fileLists(){this.init()}},methods:{init(){this.fileLists&&(this.form=Object(s["deepCopy"])(this.fileLists))},f_ynchk(t){return 1==t?"필수":"선택"},f_noact(t){return"I"==t?"등록":"Y"==t?"확인":"N"==t?"반려":"R"==t?"수정":""},docProcess(t){t.f_noact&&(t.f_noact="Y"==t.f_noact?"N":"Y",t.f_edit=!0)},async process(t){this.$emit("process",t)},async mailSend(){this.$emit("mailSend")},async downLoad(t){const e=t.n_file,a=await this.$axios.get("/api/shopinfo/getFileDown?path="+t.t_att);a?(Object(c["save"])(a,e),alert("File Donw load Click !!!!!")):await this.$ezNotify.alert("다운로드 실패 !!","오류",{})},async alldownLoad(){a("df7c");let t="1";if(this.f_downchk2&&(t="2"),this.fileLists){const e=await this.$axios.get(`/api/shopinfo/getFileDownZip?i_shop=${this.fileLists[0].i_shop}&i_no=${this.fileLists[0].i_no}&f_gubun=${this.fileLists[0].f_gubun}&f_filetype=${t}`);e?(Object(c["save"])(e,this.companyName+".zip"),alert("File Donw load Click !!!!!")):await this.$ezNotify.alert("다운로드 실패 !!","오류")}}}},h=_,f=a("2877"),p=Object(f["a"])(h,l,r,!1,null,null,null),d=p.exports,u=(a("248f"),a("a01d")),m=a("0e60"),v={components:{Shopinputmag03Form:d,TiptabMail:u["a"],EzDialog2:m["a"]},name:"ShopInputMag",title:"사업신청관리",data(){return{tabs:parseInt(this.$route.query.tabs)||0,isLoading:!1,headers:[{text:"업체명",value:"n_company",sortable:!1},{text:"정보동의",value:"f_persioninfo",sortable:!1,align:"center",width:"80px"},{text:"회사정보",value:"chk1",sortable:!1,align:"center",width:"80px"},{text:"신청서류",value:"chk2",sortable:!1,align:"center",width:"80px"},{text:"추가정보",value:"chk3",sortable:!1,align:"center",width:"80px"},{text:"공방서류",value:"f_dochk",sortable:!1,align:"center",width:"80px"},{text:"e나라도움등록",value:"f_enarachk",sortable:!1,align:"center",width:"80px"}],itemInputs:[],shopInput:[],fileAdds:[],fileAddsB:[],itemInput:{n_company:null,n_person:null,i_presno:null,t_tel1:null,t_tel2:null,i_email:null,f_saugup:null,f_run:null,f_dart:null,t_enarainfo:null,t_enarainfopw:null},fileHeaders:[{text:"순번",value:"i_ser",sortable:!1,align:"center",width:"55px"},{text:"필수여부",value:"f_yn",sortable:!1,align:"center",width:"80px"},{text:"신청(추가)서류",value:"n_filename",sortable:!1,align:"center"},{text:"첨부파일명",value:"n_file",sortable:!1,align:"center"},{text:"위치",value:"t_att",sortable:!1,align:" d-none",width:"98px"}],itemFiles:{i_shop:null,i_ser:null,i_no:null,f_yn:null,f_noact:null,n_filename:null,n_file:null,t_att:null},chkf_dochk:"%",chkf_enara:"%",chkf_serarch:"",form:{title:"",to_email:"",cc_email:"",body:""},mailBody:""}},mounted(){window.addEventListener("beforeunload",this.leave)},beforeUnmount(){window.removeEventListener("beforeunload",this.leave)},created(){this.fetchData()},watch:{},methods:{...Object(o["b"])("shop",["shopEmailSend"]),leave(t){t.preventDefault(),t.returnValue=""},datachk(t){let e="";return e="1"==t||"Y"==t?"등록완료":"-"==t?"":"미등록",e},datachk2(t){let e="";return e="1"==t||"Y"==t?"완료":"미완료",e},async clickRow(t){},async fetchData(){this.itemInputs=await this.$axios.get(`/api/shopinfo/getShopInputMag?i_shop=23-001&chkf_serarch=${this.chkf_serarch}&chkf_dochk=${this.chkf_dochk}&chkf_enara=${this.chkf_enara}`)},async clickItem(t,e){this.tabs=e,this.itemInput.i_shop&&this.itemInput.i_no==t.i_no||(this.isLoading=!0,this.shopInput=await this.$axios.get(`/api/shopinfo/getShopInputMag1?i_shop=${t.i_shop}&i_no=${t.i_no}`),this.itemInput=Object(s["deepCopy"])(this.shopInput),this.fileAdds=await this.$axios.get(`/api/shopinfo/getShopInputMag2?i_shop=${t.i_shop}&i_no=${t.i_no}&f_gubun=1`),this.fileAddsB=await this.$axios.get(`/api/shopinfo/getShopInputMag2?i_shop=${t.i_shop}&i_no=${t.i_no}&f_gubun=2`),this.isLoading=!1),this.form.body=""},async f_dochk(t){const e=await this.$ezNotify.confirm("처리 하시겠습니까  ?","공방서류");if(e){"Y"==t.f_dochk?t.f_dochk="N":t.f_dochk="Y";await this.$axios.patch(`/api/shopinfo/getShopInputMag?i_shop=${t.i_shop}&i_no=${t.i_no}&f_dochk=${t.f_dochk}`)}},async f_enarachk(t){const e=await this.$ezNotify.confirm("처리 하시겠습니까  ?","이나라도움 등록");if(e)if("Y"==t.f_enarachk)t.f_enarachk="N";else{t.f_enarachk="Y";await this.$axios.patch(`/api/shopinfo/getShopInputMag?i_shop=${t.i_shop}&i_no=${t.i_no}&f_enarachk=${t.f_enarachk}`)}},async saveDocProcess(t){for(let e in t)if(t[e].f_edit){this.$axios.patch(`/api/shopinfo/ShopInputMag2Save?i_shop=${t[e].i_shop}&i_no=${t[e].i_no}&i_ser=${t[e].i_ser}&f_noact=${t[e].f_noact}`)}},async mailSend(){let t="<p>상기 제목 관련 하여 아래와 같이 첨부 서류 확인 결과 전달 드립니다.</p><p>";1===this.tabs?(this.form.title="스마트공방 신청 서류 확인 안내",t=t+"공방 신청 서류</p>"+await this.makeBody(this.fileAdds)):2===this.tabs&&(this.form.title="스마트공방 추가 서류 확인 안내",t=t+"공방 추가 서류</p>"+await this.makeBody(this.fileAddsB)),this.form.body=t,this.$refs.dialog.open()},async sendMail(t,e,a,i){this.$refs.ez_wait.open(),this.form.title=t,this.form.to_email=e,this.form.cc_email=a,this.form.body=i;const n=await this.shopEmailSend(this.form);this.$refs.ez_wait.close(),"ok"==n&&(this.$ezNotify.alert("정상적으로 메일 발송 하였습니다..... ","성공"),this.$refs.dialog.close())},async getmailBody(t){this.mailBody=t},async getEmail(t){let e="";"U"==t?e=`/api/shopinfo/shopgetEmail?i_userid=${this.itemInput.i_userid}&gubun=${t}`:(t="S")?e=`/api/shopinfo/shopgetEmail?i_shop=${this.itemInput.i_shop}&i_no=${this.itemInput.i_no}&gubun=${t}`:(t="M")&&(e="/api/shopinfo/shopgetEmail?&gubun=TOKEN");const a=await this.$axios.get(e);a&&(this.form.to_email=a[0].to_email);const i=await this.$axios.get("/api/shopinfo/shopgetEmail?&gubun=TOKEN");i&&(this.form.cc_email=i[0].to_email)},async makeBody(t){let e="";return t.forEach(t=>{let a="Y"==t.f_noact?"접수":"N"==t.f_noact?"반려":"I"==t.f_noact||"R"==t.f_noact?"검토":"미등록";e+=`<p>${"Y"==t.f_noact?"":'<span style="color:red"'}>${t.n_filename} : 서류${a}${"Y"==t.f_noact?"":"</span>"}</p>`}),e+="<p>반려된 첨부서류에 대해서 재 등록 부탁 드립니다.</p>",e+="<p></p>감사 합니다.",e}}},k=v,b=(a("e846"),Object(f["a"])(k,i,n,!1,null,null,null));e["default"]=b.exports},e846:function(t,e,a){"use strict";a("30af")}}]);
//# sourceMappingURL=ShopInputMag.edc104ea.js.map