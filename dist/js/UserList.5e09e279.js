(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["UserList"],{b80d:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("v-form",{ref:"form"},[t("v-toolbar",{attrs:{"background-color":"primary",dark:""}},[t("v-spacer"),t("v-text-field",{attrs:{label:"ID/이름/email : ","hide-details":"","single-lin":""},model:{value:e.f_serarch,callback:function(t){e.f_serarch=t},expression:"f_serarch"}}),t("v-btn",{attrs:{color:"primary"},on:{click:e.fetchData}},[e._v("조회")])],1),t("v-data-table",{staticClass:"mytable",attrs:{headers:e.headers,items:e.items,"items-per-page":20,"footer-props":{"items-per-page-options":[10,20,30,40,50,100,-1]}},scopedSlots:e._u([{key:"item",fn:function({item:a}){return[t("tr",[t("td",[e._v(e._s(a.mb_id))]),t("td",[e._v(e._s(a.mb_name))]),t("td",[e._v(e._s(a.mb_email))]),t("td",{on:{dblclick:function(t){return e.levleChange(a)}}},[t("u",[e._v(e._s(a.mb_level))])]),t("td",[e._v(e._s(a.chkpw))]),t("td",{on:{dblclick:function(t){return e.use_delete(a)}}},[t("u",[e._v("삭제")])])])]}}])})],1)},i=[],l=(a("248f"),{name:"UserList",title:"사용자정보",data(){return{headers:[{text:"ID",value:"mb_id",sortable:!0},{text:"이름",value:"mb_name",sortable:!0},{text:"email",value:"mb_email",sortable:!0},{text:"등급",value:"mb_level",sortable:!0},{text:"비빌먼호",value:"chkpw",sortable:!1},{text:"사용자삭제",value:"f_del",sortable:!1}],items:[],f_serarch:""}},created(){this.fetchData()},mounted(){window.addEventListener("beforeunload",this.leave)},beforeUnmount(){window.removeEventListener("beforeunload",this.leave)},methods:{leave(e){e.preventDefault(),e.returnValue=""},async fetchData(){this.items=await this.$axios.get("/api/shopinfo/getShopUserList?f_serarch="+this.f_serarch)},async levleChange(e){let t="관리자"==e.mb_level?"일반":"관리자";const a=await this.$ezNotify.confirm(e.mb_name+" 등급 변경 하시겠습니까 ?",t);if(a){const a=await this.$axios.patch(`/api/shopinfo/patchShopUserList?mb_id=${e.mb_id}&mb_level=${e.mb_level}`);1===a.changedRows&&(e.mb_level=t)}},async use_delete(e){const t=await this.$ezNotify.confirm(e.mb_name+" 삭제 하시겠습니까 ?","회사삭제");if(t){const t=await this.$axios.patch(`/api/shopinfo/patchShopUserDelete?mb_id=${e.mb_id}&mb_level=${e.mb_level}`);if(1===t.affectedRows){await this.$ezNotify.confirm("삭제 완료 !!!!!!","");const t=this.items.indexOf(e);t&&this.items.splice(t,1)}}}}}),r=l,o=a("2877"),n=Object(o["a"])(r,s,i,!1,null,null,null);t["default"]=n.exports}}]);
//# sourceMappingURL=UserList.5e09e279.js.map